{'name': 'Search Marketplace Items', 'nodes': [{'parameters': {'path': 'search-marketplace-items', 'method': 'POST', 'fieldToSave': '={{ $json }}', 'options': {}}, 'id': 'webhook-trigger', 'name': 'Webhook Trigger', 'type': 'n8n-nodes-base.webhook', 'typeVersion': 1, 'position': [250, 300]}, {'parameters': {'marketplace': '={{ $json.marketplace }}', 'searchQuery': '={{ $json.searchQuery }}', 'options': {}}, 'id': 'switch-marketplace', 'name': 'Switch Marketplace', 'type': 'n8n-nodes-base.switch', 'typeVersion': 1, 'position': [450, 300]}, {'parameters': {'method': 'GET', 'url': '=https://api.ozon.ru/composer-api.bx/page/json/v2?url=/search?text={{ $json.searchQuery }}&limit=5', 'authentication': 'none', 'sendQuery': True, 'queryParameters': {'parameters': [{'name': 'text', 'value': '={{ $json.searchQuery }}'}]}, 'options': {}}, 'id': 'ozon-search', 'name': 'Ozon Search', 'type': 'n8n-nodes-base.httpRequest', 'typeVersion': 4.1, 'position': [650, 100]}, {'parameters': {'method': 'GET', 'url': '=https://search.wb.ru/exactmatch/sorted/female/v2/search.json?query={{ $json.searchQuery }}&limit=5', 'authentication': 'none', 'options': {}}, 'id': 'wildberries-search', 'name': 'Wildberries Search', 'type': 'n8n-nodes-base.httpRequest', 'typeVersion': 4.1, 'position': [650, 200]}, {'parameters': {'method': 'GET', 'url': '=https://aliexpress.ru/gateway/api/search/products?keywords={{ $json.searchQuery }}&limit=5', 'authentication': 'none', 'options': {}}, 'id': 'aliexpress-search', 'name': 'AliExpress Search', 'type': 'n8n-nodes-base.httpRequest', 'typeVersion': 4.1, 'position': [650, 300]}, {'parameters': {'method': 'GET', 'url': '=https://market.yandex.ru/api/v2/search.json?text={{ $json.searchQuery }}&limit=5', 'authentication': 'none', 'options': {}}, 'id': 'yandex-market-search', 'name': 'Yandex Market Search', 'type': 'n8n-nodes-base.httpRequest', 'typeVersion': 4.1, 'position': [650, 400]}, {'parameters': {'jsCode': "// Process items from different marketplaces\nconst marketplace = $json.marketplace;\nconst items = [];\n\nif (marketplace === 'Ozon') {\n  const ozonItems = $json.result.items || [];\n  ozonItems.forEach(item => {\n    items.push({\n      image: item.image || '',\n      link: `https://ozon.ru/product/${item.id}`,\n      price: item.price || 'N/A',\n      delivery: item.delivery || 'N/A',\n      description: item.title || ''\n    });\n  });\n} else if (marketplace === 'Wildberries') {\n  const wbItems = $json.data.products || [];\n  wbItems.forEach(item => {\n    items.push({\n      image: `https://images.wbstatic.net/c246x328/new/${item.id}-1.jpg`,\n      link: `https://wildberries.ru/catalog/${item.id}/detail.aspx`,\n      price: item.price || 'N/A',\n      delivery: item.delivery || 'N/A',\n      description: item.name || ''\n    });\n  });\n} else if (marketplace === 'AliExpress') {\n  const aeItems = $json.data.products || [];\n  aeItems.forEach(item => {\n    items.push({\n      image: item.imageUrl || '',\n      link: `https://aliexpress.ru/item/${item.productId}.html`,\n      price: item.price || 'N/A',\n      delivery: item.delivery || 'N/A',\n      description: item.title || ''\n    });\n  });\n} else if (marketplace === 'YandexMarket') {\n  const ymItems = $json.data.products || [];\n  ymItems.forEach(item => {\n    items.push({\n      image: item.image || '',\n      link: `https://market.yandex.ru/product/${item.id}`,\n      price: item.price || 'N/A',\n      delivery: item.delivery || 'N/A',\n      description: item.name || ''\n    });\n  });\n}\n\nreturn [{ json: { items } }];"}, 'id': 'process-items', 'name': 'Process Items', 'type': 'n8n-nodes-base.function', 'typeVersion': 1, 'position': [850, 300]}, {'parameters': {'jsCode': "// Format items into a text list\nconst items = $json.items || [];\nlet result = 'Найденные товары:\\n\\n';\n\nitems.forEach((item, index) => {\n  result += `${index + 1}. ${item.image ? `[Изображение](${item.image})` : 'Нет изображения'}\\n`;\n  result += `   - Цена: ${item.price} руб.\\n`;\n  result += `   - Доставка: ${item.delivery}\\n`;\n  result += `   - Описание: ${item.description}\\n\\n`;\n});\n\nreturn [{ json: { result } }];"}, 'id': 'format-result', 'name': 'Format Result', 'type': 'n8n-nodes-base.function', 'typeVersion': 1, 'position': [1050, 300]}, {'parameters': {'respondWith': 'json', 'options': {}}, 'id': 'respond', 'name': 'Respond', 'type': 'n8n-nodes-base.respondToWebhook', 'typeVersion': 1.1, 'position': [1250, 300]}], 'connections': {'Webhook Trigger': {'main': [[{'node': 'Switch Marketplace', 'type': 'main', 'index': 0}]]}, 'Switch Marketplace': {'main': [[{'node': 'Ozon Search', 'type': 'main', 'index': 0}], [{'node': 'Wildberries Search', 'type': 'main', 'index': 0}], [{'node': 'AliExpress Search', 'type': 'main', 'index': 0}], [{'node': 'Yandex Market Search', 'type': 'main', 'index': 0}]]}, 'Ozon Search': {'main': [[{'node': 'Process Items', 'type': 'main', 'index': 0}]]}, 'Wildberries Search': {'main': [[{'node': 'Process Items', 'type': 'main', 'index': 0}]]}, 'AliExpress Search': {'main': [[{'node': 'Process Items', 'type': 'main', 'index': 0}]]}, 'Yandex Market Search': {'main': [[{'node': 'Process Items', 'type': 'main', 'index': 0}]]}, 'Process Items': {'main': [[{'node': 'Format Result', 'type': 'main', 'index': 0}]]}, 'Format Result': {'main': [[{'node': 'Respond', 'type': 'main', 'index': 0}]]}}, 'active': True, 'settings': {'executionOrder': 'v1'}}